<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R Workshop</title>
    <meta charset="utf-8" />
    <meta name="author" content="STAT 20 UC Berkeley" />
    <script src="assets/libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="assets/libs/countdown-0.3.5/countdown.css" rel="stylesheet" />
    <script src="assets/libs/countdown-0.3.5/countdown.js"></script>
    <script src="assets/libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="assets/libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="stat20.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: center, middle

# Lab: R Workshop
### Introduction to Probability and Statistics

Welcome! Please log in to `stat20.datahub.berkeley.edu` and open the slides from Lecture 3 in a browser tab for reference.

---
## Components of RStudio

1. Console
--


2. Environment
--


3. Editor
--


4. File Directory
--

.task[
Now we are going to switch over to datahub to understand these 4 components a bit better.
]

---

## Components of RStudio

1. **Console**: Where the live R session lives. Type commands into the prompt `&gt;` and press enter/return to run them. The Console is in the lower-left pane.

--

2. **Environment**: The space that keeps track of all of the data and objects that you have created or loaded and have access to. Found in the upper right pane.

--

3. **Editor**: Used to compose and edit text (.Rmd files) and R code (.r files). Found in the upper left pane.

--

4. **File Directory**: Used to navigate between your files/folders on your datahub account. Can move, copy, rename, delete, etc. Found in the lower right pane.

---
## R as a calculator

R allows all of the standard arithmetic operations.

.pull-left[

**Addition**

```r
1 + 2
```

```
## [1] 3
```

**Subtraction**

```r
1 - 2
```

```
## [1] -1
```

]

--

.pull-right[
**Multiplication**

```r
1 * 2 
```

```
## [1] 2
```

**Division**

```r
1 / 2
```

```
## [1] 0.5
```


]


---
## R as a calculator, cont.

R allows all of the standard arithmetic operations.

.pull-left[

**Exponents**

```r
2 ^ 3
```

```
## [1] 8
```
]

.pull-right[

**Parentheses for Order of Ops.**

```r
2 ^ 3 + 1
```

```
## [1] 9
```


```r
2 ^ (3 + 1)
```

```
## [1] 16
```

]

---

## Your turn

.task[
What is three times one point two raised to the quantity thirteen divided six?

]

<div class="countdown" id="timer_61ef6193" style="right:0;bottom:0;font-size:1.5em;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>


???


```r
3 * 1.2 ^ (13 / 6)
```

```
## [1] 4.453286
```

---
## Object assignment

You can create/save objects using the assignment operator `&lt;-` . This is the equivalent of `=` in other programming languages. 

--


```r
my_fav_num &lt;- 11
```

--



--

In order to be recognized as a valid object name, you have to follow certain conventions; namely, the object name should begin with a letter.

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; good names &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; names that cause errors &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; a &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1trial &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; b &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; $ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; FOO &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; ^mean &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; my_var &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; my var &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## Functions on vectors

A *vector* is the simplest structure used in R to store data. It can be created using the function `c()`.


```r
my_vector &lt;- c(1, 3, 4)
my_vector
```


```
## [1] 1 3 4
```

--

A *function* operates on an R object and produces output. R has many of the mathematical functions that you would expect.


```r
sum(my_vector)
```

```
## [1] 8
```


---
# Your Turn
--

.task[
1. Create a vector named `vec` with the even integers between 1 and 10 as well as the number 99 (six elements total).

2. Find the sum of that vector.

3. Find the max of that vector.

4. Take the mean of that vector and round it to the nearest integer.
]

These should all be solved with R code. If you don't know the name of a function to use, with hazard a guess by looking for a help file (e.g. `?sum`) or google it.

<div class="countdown" id="timer_61ef60d5" style="right:0;bottom:0;font-size:1.5em;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>


---
Demo of:

1. Creating an R script
2. Saving it
3. Typing in code that answers previous question
4. How to run code from a script
  - Put cursor on line and click "Run"
  - Put cursor on line and type command+return.
  - Copy and paste to the console.
  
???

vec &lt;- c(2, 4, 6, 8, 10, 99)
sum(vec)
max(vec)
?round
round(mean(vec))

---
## Loading Packages

R has a vast ecosystem of packages that extend the language. Any installed package can be loaded with the `library()` function.

--

.pull-left[
&lt;img src="assets/images/hexes.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="assets/images/tidyverse-hex.png" width="30%" style="display: block; margin: auto;" /&gt;

We will use the package *tidyverse*, which contains a set of powerful science packages.


```r
library(tidyverse)
```
]

---
## Building a data frame

You can combine vectors into a data frame using the `tibble()` function from the `tidyverse` package.


```r
bill_depth_mm &lt;- c(15.0, 17.1, 18.7, 18.9)
bill_length_mm &lt;- c(47.5, 40.2, 39.0, 35.3)
species &lt;- c("Gentoo", "Adelie", "Adelie", "Adelie")
```

--


```r
library(tidyverse)
penguins_df &lt;- tibble(bill_depth_mm, bill_length_mm, species)
penguins_df
```

```
## # A tibble: 4 Ã— 3
##   bill_depth_mm bill_length_mm species
##           &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  
## 1          15             47.5 Gentoo 
## 2          17.1           40.2 Adelie 
## 3          18.7           39   Adelie 
## 4          18.9           35.3 Adelie
```


---
# Your Turn

.task[
1. Create an .r script, name it, and save it.

2. Create three vectors, `name`, `favorite_color`, and `favorite_number` that contain observations on those variables from 5 people in this class.

3. Combine them into a data frame called `my_classmates`.
]

<div class="countdown" id="timer_61ef5f0c" style="right:0;bottom:0;font-size:1.5em;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">06</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
## Loading data from a package

Most data you will *not* be creating by hand. You will either be

1. Loading it in from a separate file.

2. Loading it from within an R package.

--

To load data from a package,

1. load that package with `library()`
2. load the data set with `data()`


---
## Functions on data frames

The `tidyverse` package contains several functions used to manipulate data frames: 

* `select()` : subset columns 

--

* `arrange()` : sort rows 

--

* `mutate()` : create a new column from existing column(s)

---

Demo `select()`, `arrange()`, and `mutate()` on 


```r
library(palmerpenguins)
data(penguins)
```

Don't use the pipe syntax.

---

# Your turn

There is a built-in data set to R called `mtcars` that has information on cars that appeared in Motor Trend magazine. It's already loaded and can be accessed as `mtcars`.

.task[
1. Create a slimmer data frame that only contains the columns `hp` and `wt` and save it to `mtcars_slim`.

2. Create a new column called `power_to_weight` that is the ratio of `hp` to `wt`. Save the three-column data frame back over `mtcars_slim`.

3. Sort the data frame in descending order by the power-to-weight ratio.
]

Hint: look up help files!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "atelier-forest-light",
"highlightLines": true,
"highlightSpans": true,
"ratio": "16:9",
"countIncrementalSlides": false,
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
